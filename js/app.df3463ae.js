(function(){"use strict";var e={3196:function(e,t,o){var r=o(9235),l=o(3686),a=o(3205),i=o(7741),s=o(3144),n=o(8366),d=o(6339),m=o(8126),u=o(8782),c=o(5853),f=o(1002),h=o(3721),g=o(8456),p=o(3534),b=o(7800),v=o(3420),x=o(234),w=o(8074),y=o(9963),W=o(6252);function k(e,t,o,r,l,a){const i=(0,W.up)("AppHeader");return(0,W.wg)(),(0,W.j4)(i)}const C={class:"bg-opacity-10 mycontainer","x-data":"{ isOpen: false }"},V={class:"container px-6 py-4 mx-auto md:flex md:justify-between md:items-center"},j={class:"flex items-center justify-between"},S=(0,W.Wm)("a",{class:"text-xl font-bold text-gray-200 transition-colors duration-300 transform md:text-2xl hover:text-indigo-400",href:"#"},"Reader Home ",-1),B=(0,W.Wm)("button",{type:"button",class:"text-gray-200 hover:text-gray-400 focus:outline-none focus:text-gray-400","aria-label":"toggle menu"},[(0,W.Wm)("svg",{viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"},[(0,W.Wm)("path",{"fill-rule":"evenodd",d:"M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"})])],-1),O=(0,W.Wm)("a",{class:"text-sm font-medium text-gray-200 transition-colors duration-300 transform hover:text-indigo-400",href:"#"},"Link",-1),U=(0,W.Wm)("a",{class:"pr-5 text-sm font-medium text-gray-200 transition-colors duration-300 transform hover:text-indigo-900",href:"#"},"Help",-1),_={class:"flex-col items-center justify-center",style:{height:"400px"}},z=(0,W.Wm)("div",{class:"text-center text-4xl pt-32 text-gray-100"},"Reader.Dev",-1),L={class:"text-center mt-7 w-full"},$={class:"w-full mx-auto rounded-xl opacity-80 shadow-lg p-10 text-gray-800 relative overflow-hidden resize-x min-w-80 max-w-3xl"},P={class:"relative mt-1"},A=(0,W.Wm)("svg",{class:"hover text-pink-600",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",focusable:"false",width:"1em",height:"1em",style:{"-ms-transform":"rotate(360deg)","-webkit-transform":"rotate(360deg)",transform:"rotate(360deg)"},preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[(0,W.Wm)("path",{d:"M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5l-1.5 1.5l-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16A6.5 6.5 0 0 1 3 9.5A6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14S14 12 14 9.5S12 5 9.5 5z",fill:"#626262"})],-1),I=(0,W.uE)('<div class="absolute top-0 left-0 w-full h-2 flex"><div class="h-2 bg-blue-500 flex-1"></div><div class="h-2 bg-red-500 flex-1"></div><div class="h-2 bg-yellow-500 flex-1"></div><div class="h-2 bg-blue-500 flex-1"></div><div class="h-2 bg-green-500 flex-1"></div><div class="h-2 bg-red-500 flex-1"></div></div>',1),Z=(0,W.Wm)("div",{class:"text-center text-gray-100"}," Recommend great books or polish others. ",-1);function F(e,t,o,r,l,a){const i=(0,W.up)("Card");return(0,W.wg)(),(0,W.j4)(W.HY,null,[(0,W.Wm)("header",C,[(0,W.Wm)("nav",V,[(0,W.Wm)("div",j,[S,(0,W.Wm)("div",{onClick:t[1]||(t[1]=t=>e.isOpen=!e.isOpen),class:"flex md:hidden"},[B])]),(0,W.Wm)("div",{class:[e.isOpen?"flex":"hidden","flex-col mt-2 space-y-4 md:flex md:space-y-0 md:flex-row md:items-center md:space-x-10 md:mt-0"]},[O,U],2)]),(0,W.Wm)("section",_,[z,(0,W.Wm)("div",L,[(0,W.Wm)("div",$,[(0,W.Wm)("div",P,[(0,W.wy)((0,W.Wm)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.keywords=e),onKeydown:t[3]||(t[3]=(...e)=>a.notifyChild&&a.notifyChild(...e)),class:"w-full pl-3 pr-10 py-2 border-2 border-gray-200 rounded-xl hover:border-gray-300 focus:outline-none focus:border-indigo-500 focus:text-gray-800 transition-colors",placeholder:"Search..."},null,544),[[y.nr,l.keywords]]),(0,W.Wm)("button",{onClick:t[4]||(t[4]=(...e)=>a.notifyChild&&a.notifyChild(...e)),class:"block w-7 h-7 text-center text-xl leading-0 absolute top-2 right-2 text-gray-400 focus:outline-none hover:text-gray-900 transition-colors"},[A])]),I])]),Z])]),(0,W.Wm)(i,{ref:"child"},null,512)],64)}var M=o(3577);const H={class:"pt-6 pb-6 bg-gray-100"},D={id:"book"},R={class:"container w-100 lg:w-4/5 mx-auto flex flex-col"},q={class:"flex justify-between items-center"},E={class:"flex"},T=(0,W.Wm)("div",{class:"pl-4 font-serif uppercase text-4xl xl:text-3xl"}," RESULTS ",-1),Y={class:"pl-4 rounded-lg font-serif uppercase text-4xl xl:text-3xl bg-gray-400"},G={class:"h-auto w-auto md:w-2/3"},K={class:"w-full py-4 px-6 text-gray-800 flex flex-col justify-start"},J={class:"flex justify-between"},N={class:"font-semibold text-xl text-center leading-tight truncate"},Q={class:"mt-2 text-sm text-gray-700 tracking-wide font-semibold"},X={class:"pt-4"},ee={style:{"white-space":"pre-wrap"}},te={class:"mt-2 text-sm text-gray-700 tracking-wide font-normal text-right"},oe={class:"flex justify-center"};function re(e,t,o,r,l,a){const i=(0,W.up)("add-form"),s=(0,W.up)("el-button"),n=(0,W.up)("el-pagination");return(0,W.wg)(),(0,W.j4)("div",H,[(0,W.Wm)("div",D,[(0,W.Wm)("div",R,[(0,W.Wm)("div",q,[(0,W.Wm)("div",E,[T,(0,W.Wm)("h2",Y,(0,M.toDisplayString)(a.getBookLen()),1)]),(0,W.Wm)(i,{class:"pr-4",onSubmitBook:a.loadAllBooks,ref:"edit"},null,8,["onSubmitBook"])]),((0,W.wg)(!0),(0,W.j4)(W.HY,null,(0,W.Ko)(l.books.slice((l.currentPage-1)*l.pageSize,l.currentPage*l.pageSize),(e=>((0,W.wg)(),(0,W.j4)("div",{key:e,class:"flex flex-col md:flex-row overflow-hidden bg-white rounded-lg shadow-xl my-8 w-100 mx-2"},[(0,W.Wm)("div",G,[(0,W.Wm)("img",{class:"inset-0 h-full w-full object-cover object-center",src:e.cover},null,8,["src"])]),(0,W.Wm)("div",K,[(0,W.Wm)("div",J,[(0,W.Wm)("h3",N,(0,M.toDisplayString)(e.title),1),(0,W.Wm)("div",null,[(0,W.Wm)(s,{style:{outline:"none"},class:"item-center",size:"small",type:"primary",icon:"el-icon-edit",onClick:t=>a.editBook(e),circle:""},null,8,["onClick"]),(0,W.Wm)(s,{style:{outline:"none"},class:"item-center",type:"danger",size:"small",icon:"el-icon-delete",circle:"",onClick:t=>a.deleteBook(e.id)},null,8,["onClick"])])]),(0,W.Wm)("p",Q," 作者: "+(0,M.toDisplayString)(e.author),1),(0,W.Wm)("p",X,[(0,W.Wm)("pre",ee,(0,M.toDisplayString)(e.abs),1)]),(0,W.Wm)("p",te,(0,M.toDisplayString)(e.referrer)+" • "+(0,M.toDisplayString)(e.date),1)])])))),128)),(0,W.Wm)("div",oe,[(0,W.Wm)(n,{background:!0,layout:"prev, pager, next",onCurrentChange:a.handleCurrentChange,"current-page":l.currentPage,"page-size":l.pageSize,total:l.books.length},null,8,["onCurrentChange","current-page","page-size","total"])])])])])}const le=(0,W.Wm)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-800 items-center",viewBox:"0 0 20 20",fill:"currentColor"},[(0,W.Wm)("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule":"evenodd"})],-1),ae=(0,W.Wm)("span",{class:"text-gray-800"}," Add One ",-1),ie={class:"dialog-footer"},se=(0,W.Uk)("取 消"),ne=(0,W.Uk)("确 定");function de(e,t,o,r,l,a){const i=(0,W.up)("el-input"),s=(0,W.up)("el-form-item"),n=(0,W.up)("upload-image"),d=(0,W.up)("el-form"),m=(0,W.up)("el-button"),u=(0,W.up)("el-dialog");return(0,W.wg)(),(0,W.j4)("div",null,[(0,W.Wm)("button",{onClick:t[1]||(t[1]=e=>l.dialogFormVisible=!0),style:{outline:"none"},class:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-pink-500 hover:to-yellow-500 text-gray-200 font-bold py-2 px-4 rounded-lg inline-flex items-center border-0"},[le,ae]),(0,W.Wm)(u,{title:"添加推荐书籍",modelValue:l.dialogFormVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>l.dialogFormVisible=e)},{footer:(0,W.w5)((()=>[(0,W.Wm)("span",ie,[(0,W.Wm)(m,{onClick:t[7]||(t[7]=e=>{l.dialogFormVisible=!1,a.clearForm()})},{default:(0,W.w5)((()=>[se])),_:1}),(0,W.Wm)(m,{type:"primary",onClick:t[8]||(t[8]=e=>a.submitBook("form"))},{default:(0,W.w5)((()=>[ne])),_:1})])])),default:(0,W.w5)((()=>[(0,W.Wm)(d,{model:l.form,rules:l.rules,ref:"form"},{default:(0,W.w5)((()=>[(0,W.Wm)(s,{label:"书籍名","label-width":l.formLabelWidth,prop:"title"},{default:(0,W.w5)((()=>[(0,W.Wm)(i,{modelValue:l.form.title,"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,W.Wm)(s,{label:"作者","label-width":l.formLabelWidth,prop:"author"},{default:(0,W.w5)((()=>[(0,W.Wm)(i,{modelValue:l.form.author,"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.author=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,W.Wm)(s,{label:"推荐人","label-width":l.formLabelWidth,prop:"referrer"},{default:(0,W.w5)((()=>[(0,W.Wm)(i,{modelValue:l.form.referrer,"onUpdate:modelValue":t[4]||(t[4]=e=>l.form.referrer=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,W.Wm)(s,{label:"介绍/评论","label-width":l.formLabelWidth,prop:"abs"},{default:(0,W.w5)((()=>[(0,W.Wm)(i,{type:"textarea",modelValue:l.form.abs,"onUpdate:modelValue":t[5]||(t[5]=e=>l.form.abs=e),rows:7,maxlength:"300",autocomplete:"off","show-word-limit":"true"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,W.Wm)(s,{label:"插图","label-width":l.formLabelWidth,prop:"cover"},{default:(0,W.w5)((()=>[(0,W.Wm)(i,{modelValue:l.form.cover,"onUpdate:modelValue":t[6]||(t[6]=e=>l.form.cover=e),autocomplete:"off",placeholder:"Image URL"},null,8,["modelValue"]),(0,W.Wm)(n,{onOnLoadImage:a.getImageUrl,ref:"upload"},null,8,["onOnLoadImage"])])),_:1},8,["label-width"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}const me=(0,W.Uk)("点击上传"),ue=(0,W.Wm)("div",{class:"el-upload__tip"},"只能上传 jpg/png 文件，且不超过4MB",-1);function ce(e,t,o,r,l,a){const i=(0,W.up)("el-button"),s=(0,W.up)("el-upload");return(0,W.wg)(),(0,W.j4)(s,{ref:"upload",action:"http://49.235.89.66:8443/api/covers","on-preview":a.handlePreview,"on-remove":a.handleRemove,"on-success":a.handleSuccess,"before-upload":a.beforImageUpload,"file-list":l.fileList,"list-type":"picture"},{tip:(0,W.w5)((()=>[ue])),default:(0,W.w5)((()=>[(0,W.Wm)(i,{size:"small",type:"primary"},{default:(0,W.w5)((()=>[me])),_:1})])),_:1},8,["on-preview","on-remove","on-success","before-upload","file-list"])}var fe={data(){return{fileList:[],url:""}},methods:{beforImageUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,o=e.size/1024/1024<4;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),o||this.$message.error("上传头像图片大小不能超过 4MB!"),t&&o},handleRemove(e,t){console.log(e,t)},handlePreview(e){console.log(e)},handleSuccess(e){this.url=e,this.$emit("onLoadImage",this.url),this.$message.warning("图片上传成功")},clearImage(){this.$refs.upload.clearFiles()}}};fe.render=ce;var he=fe,ge={components:{UploadImage:he},data(){return{dialogFormVisible:!1,form:{id:"",title:"",author:"",referrer:"",cover:"",abs:"",date:""},rules:{title:[{required:!0,message:"请输入推荐书籍名",trigger:"blur"}],author:[{required:!0,message:"请输入作者名",trigger:"blur"}],referrer:[{required:!0,message:"请输入推荐人昵称",trigger:"blur"}],abs:[{required:!0,message:"请输入图书简介",trigger:"blur"},{min:100,max:300,message:"请输入至少100-300字之间",trigger:"blur"}],cover:[{required:!0,message:"请选择一张插图",trigger:"blur"}]},formLabelWidth:"100px",remnant:300}},methods:{absInput(){var e=this.abs.length;this.remnant=300-e},getImageUrl(e){console.log("getImageUrl"+e),this.form.cover=e},submitBook(e){this.$refs[e].validate((e=>{if(e){console.log("submitbook!");var t=new Date;this.form.date=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),this.$axios.post("/books",{id:this.form.id,title:this.form.title,cover:this.form.cover,author:this.form.author,abs:this.form.abs,referrer:this.form.referrer,date:this.form.date}).then((e=>{e&&200===e.status&&(console.log("submitBook status 200"),this.dialogFormVisible=!1,this.$refs.upload.clearImage(),this.$emit("submitBook"),this.clearForm())}))}else console.log("error submit")}))},clearForm(){this.form.title="",this.form.author="",this.form.cover="",this.form.referrer="",this.form.abs="",this.form.id="",this.form.date="",this.$refs.form.clearValidate()}}};ge.render=de;var pe=ge,be={components:{AddForm:pe},data(){return{books:[],booklen:0,currentPage:1,pageSize:3}},methods:{handleCurrentChange(e){this.currentPage=e},getBookLen(){return this.booklen},loadAllBooks(){var e=this;this.$axios.get("/books").then((t=>{t&&200===t.status&&(e.books=t.data,console.log("reload all books"),this.booklen=this.books.length)}))},searchInput(e){var t=this;this.$axios.get("/search?keywords="+e).then((e=>{e&&200===e.status&&(t.books=e.data,this.booklen=this.books.length,console.log("search by keywords success!"))}))},deleteBook(e){this.$axios.post("/delete",{id:e}).then((e=>{e&&200===e.status&&(console.log("delete success!"),this.loadAllBooks())}))},editBook(e){console.log(e.title),this.$refs.edit.dialogFormVisible=!0,this.$refs.edit.form={id:e.id,title:e.title,author:e.author,referrer:e.referrer,cover:e.cover,abs:e.abs,date:e.date}}},mounted(){this.loadAllBooks(),console.log("loadAllBooks!!!")}};be.render=re;var ve=be,xe={components:{Card:ve},data(){return{keywords:""}},methods:{notifyChild(){""!=this.keywords&&this.$refs.child.searchInput(this.keywords)}}};xe.render=F;var we=xe,ye={name:"App",components:{AppHeader:we}};ye.render=k;var We=ye,ke=o(9669),Ce=o.n(ke);const Ve=(0,y.ri)(We),je=[w.default,x.Z,v.ZP,b.default,p.Z,g.Z,h.Z,f.default,c.ZP,u.Z,m.Z,d.Z,n.Z],Se=[s.Z,i.Z,a.Z,l.Z,r.Z];je.forEach((e=>{Ve.component(e.name,e)})),Se.forEach((e=>{Ve.use(e)})),Ve.config.globalProperties.$axios=Ce(),Ce().defaults.baseURL="http://49.235.89.66:8443/api",Ve.mount("#app")}},t={};function o(r){var l=t[r];if(void 0!==l)return l.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=e,function(){var e=[];o.O=function(t,r,l,a){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],l=e[d][1],a=e[d][2];for(var s=!0,n=0;n<r.length;n++)(!1&a||i>=a)&&Object.keys(o.O).every((function(e){return o.O[e](r[n])}))?r.splice(n--,1):(s=!1,a<i&&(i=a));s&&(e.splice(d--,1),t=l())}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,l,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var l,a,i=r[0],s=r[1],n=r[2],d=0;for(l in s)o.o(s,l)&&(o.m[l]=s[l]);if(n)var m=n(o);for(t&&t(r);d<i.length;d++)a=i[d],o.o(e,a)&&e[a]&&e[a][0](),e[i[d]]=0;return o.O(m)},r=self["webpackChunktailwind_demo"]=self["webpackChunktailwind_demo"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(3196)}));r=o.O(r)})();
//# sourceMappingURL=app.df3463ae.js.map